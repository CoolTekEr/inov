#!/bin/bash

# Usage help information
usage() {
    echo "Usage: $0 <string1> <string2> <string3>"
    echo "Example: $0 value1 value2 value3"
}

# Check if all required arguments are provided
if [ "$#" -ne 3 ]; then
    usage
    exit 1
fi

# Set variables
STRING1=$1
STRING2=$2
STRING3=$3
URL="http://x.y.z.com"
HEADER="appid: YourAppID"

# Send POST request with fields and headers
RESPONSE=$(curl -s -X POST -H "$HEADER" -d "{\"string1\":\"$STRING1\",\"string2\":\"$STRING2\",\"string3\":\"$STRING3\"}" "$URL")

# Check response status
RESPONSE_CODE=$(echo "$RESPONSE" | awk '{print $2}')
if [ "$RESPONSE_CODE" -eq 200 ]; then
    # Extract the 'target' string from response JSON
    TARGET=$(echo "$RESPONSE" | grep -o '"target":"[^"]*' | cut -d'"' -f4)
    echo "Target: $TARGET"
else
    # Print user-friendly error message
    echo "Error: Request failed with response code $RESPONSE_CODE"
fi
